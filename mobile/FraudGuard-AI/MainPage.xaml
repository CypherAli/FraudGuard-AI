<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="FraudGuardAI.MainPage"
             Shell.NavBarIsVisible="False">

    <Grid x:Name="MainGrid" 
          RowDefinitions="Auto,*,Auto,Auto" 
          Padding="24,48,24,24">
        
        <!-- Header -->
        <VerticalStackLayout Grid.Row="0" Spacing="4" HorizontalOptions="Center">
            <Label Text="FraudGuard"
                   FontSize="28"
                   FontAttributes="Bold"
                   HorizontalOptions="Center"
                   TextColor="{StaticResource TextPrimary}"/>
            
            <Label Text="Call Protection System"
                   FontSize="14"
                   HorizontalOptions="Center"
                   TextColor="{StaticResource TextSecondary}"/>
        </VerticalStackLayout>

        <!-- Shield Section -->
        <VerticalStackLayout Grid.Row="1" 
                            VerticalOptions="Center" 
                            HorizontalOptions="Center"
                            Spacing="32">
            
            <!-- Shield Container -->
            <Border x:Name="ShieldBorder"
                    WidthRequest="180"
                    HeightRequest="180"
                    StrokeThickness="3"
                    Stroke="#2A3F54"
                    BackgroundColor="#1B2838"
                    HorizontalOptions="Center">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="90"/>
                </Border.StrokeShape>
                <Border.Shadow>
                    <Shadow Brush="#000000"
                           Opacity="0.4"
                           Radius="30"
                           Offset="0,10"/>
                </Border.Shadow>
                
                <Grid>
                    <!-- Inner Glow Ring -->
                    <Border x:Name="GlowRing"
                            WidthRequest="150"
                            HeightRequest="150"
                            StrokeThickness="2"
                            Stroke="{StaticResource GlowGreen}"
                            BackgroundColor="Transparent"
                            HorizontalOptions="Center"
                            VerticalOptions="Center"
                            Opacity="0">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="75"/>
                        </Border.StrokeShape>
                    </Border>
                    
                    <!-- Shield Icon -->
                    <Label x:Name="ShieldIcon"
                           Text="ðŸ›¡"
                           FontSize="72"
                           HorizontalOptions="Center"
                           VerticalOptions="Center"
                           Opacity="0.4"/>
                </Grid>
            </Border>

            <!-- Status Info -->
            <VerticalStackLayout Spacing="12" HorizontalOptions="Center">
                <Label x:Name="StatusLabel"
                       Text="Inactive"
                       FontSize="24"
                       FontAttributes="Bold"
                       HorizontalOptions="Center"
                       TextColor="{StaticResource TextPrimary}"/>
                
                <!-- Connection Indicator -->
                <Border BackgroundColor="#1B2838"
                       StrokeThickness="0"
                       Padding="16,8"
                       HorizontalOptions="Center">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="20"/>
                    </Border.StrokeShape>
                    
                    <HorizontalStackLayout Spacing="8">
                        <Border x:Name="ConnectionDot"
                               WidthRequest="8"
                               HeightRequest="8"
                               BackgroundColor="#5C6B7A"
                               StrokeThickness="0"
                               VerticalOptions="Center">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="4"/>
                            </Border.StrokeShape>
                        </Border>
                        <Label x:Name="ConnectionStatusLabel"
                               Text="Not Connected"
                               FontSize="13"
                               TextColor="{StaticResource TextSecondary}"
                               VerticalOptions="Center"/>
                    </HorizontalStackLayout>
                </Border>
            </VerticalStackLayout>
        </VerticalStackLayout>

        <!-- Alert Banner -->
        <Border x:Name="AlertBanner"
                Grid.Row="2"
                IsVisible="False"
                BackgroundColor="{StaticResource DangerBackground}"
                Padding="20,16"
                Margin="0,0,0,20"
                StrokeThickness="1"
                Stroke="{StaticResource GlowRed}">
            <Border.StrokeShape>
                <RoundRectangle CornerRadius="16"/>
            </Border.StrokeShape>
            
            <Grid ColumnDefinitions="Auto,*">
                <Border WidthRequest="44"
                       HeightRequest="44"
                       BackgroundColor="#F8717130"
                       StrokeThickness="0"
                       VerticalOptions="Start">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="22"/>
                    </Border.StrokeShape>
                    <Label Text="âš "
                           FontSize="22"
                           HorizontalOptions="Center"
                           VerticalOptions="Center"/>
                </Border>
                
                <VerticalStackLayout Grid.Column="1" Spacing="4" Margin="14,0,0,0">
                    <Label x:Name="AlertTypeLabel"
                           Text="Warning"
                           FontSize="15"
                           FontAttributes="Bold"
                           TextColor="#FCA5A5"/>
                    <Label x:Name="AlertMessageLabel"
                           Text="Potential fraud detected"
                           FontSize="13"
                           TextColor="#FECACA"
                           LineBreakMode="TailTruncation"/>
                    <Label x:Name="AlertConfidenceLabel"
                           Text="Risk: 95%"
                           FontSize="12"
                           TextColor="#FCA5A5"
                           Opacity="0.8"/>
                </VerticalStackLayout>
            </Grid>
        </Border>

        <!-- Action Button -->
        <Button x:Name="ToggleButton"
                Grid.Row="3"
                Text="Start Protection"
                FontSize="17"
                FontAttributes="Bold"
                HeightRequest="56"
                CornerRadius="28"
                BackgroundColor="{StaticResource SafeColor}"
                TextColor="#0D1B2A"
                Clicked="OnToggleButtonClicked"
                Margin="0,0,0,16">
            <Button.Shadow>
                <Shadow Brush="#34D399"
                       Opacity="0.35"
                       Radius="20"
                       Offset="0,8"/>
            </Button.Shadow>
        </Button>

        <!-- Debug Label -->
        <Label x:Name="DebugLabel"
               Grid.Row="3"
               Text=""
               FontSize="10"
               TextColor="#5C6B7A"
               HorizontalOptions="Center"
               Margin="0,60,0,0">
            <Label.Triggers>
                <DataTrigger TargetType="Label" Binding="{Binding Source={x:Static Application.Current}, Path=Properties[IsDebugMode]}" Value="False">
                    <Setter Property="IsVisible" Value="False" />
                </DataTrigger>
            </Label.Triggers>
        </Label>
    </Grid>
</ContentPage>
